{
        "id": "xhamster",
        "name": "XHamster",
        "api": "https://zh.xhamster.com",
        "nsfw": true,
        "type": 1,
        "desc": "XHamsterå®Œç¾(ç¿»å¢™+å¤æ‚è§†å›¾)",
        "extra": {
            "js": {
                "category": "return [\n  { text: 'é¦–é¡µ', id: '4k' },\n  { text: 'JAV', id: 'categories/jav' },\n  { text: 'å£äº¤', id: 'categories/blowjob' },\n  { text: 'äºšæ´²äºº', id: 'categories/asian' },\n  { text: 'Hentai', id: 'categories/hentai' },\n  { text: 'æˆç†Ÿ', id: 'categories/mature' },\n  { text: '18å²', id: 'categories/18-year-old' },\n  { text: 'æ— ç ', id: 'categories/uncensored' },\n  { text: 'MILF', id: 'categories/milf' },\n  { text: 'å¦ˆå¦ˆ', id: 'categories/mom' },\n  { text: 'å†…å°„', id: 'categories/creampie' },\n  { text: '3D', id: 'categories/3d' },\n  { text: 'äº¤äº’å¼', id: 'categories/interactive' },\n  { text: 'å·çª¥', id: 'categories/voyeur' },\n  { text: 'å¡é€š', id: 'categories/cartoon' },\n  { text: 'åˆé›†', id: 'categories/compilation' },\n  { text: 'è½¯æ ¸', id: 'categories/softcore' },\n  { text: 'å¤å¤', id: 'categories/vintage' },\n  { text: 'å­—å¹•', id: 'categories/caption' },\n  { text: 'è‡ªåˆ¶', id: 'categories/homemade' },\n  { text: 'å¹•åèŠ±çµ®', id: 'categories/behind-the-scenes' },\n  { text: 'å¤å¤é£', id: 'categories/retro' },\n  { text: 'æç¬‘', id: 'categories/funny' },\n  { text: 'å‰§æƒ…', id: 'categories/story' },\n  { text: 'Gonzo', id: 'categories/gonzo' },\n  { text: 'åäºº', id: 'categories/celebrity' },\n  { text: 'ç‰¹å†™', id: 'categories/close-up' },\n  { text: 'æ‘„åƒå¤´', id: 'categories/webcam' },\n  { text: 'POV', id: 'categories/pov' },\n  { text: 'ä¸šä½™', id: 'categories/amateur' },\n  { text: 'PMV', id: 'categories/pmv' },\n  { text: 'Pornstar', id: 'categories/pornstar' },\n  { text: 'æƒ…è‰²', id: 'categories/erotica' },\n  { text: '69', id: 'categories/69' },\n  { text: 'èƒ¸éƒ¨æ€§äº¤', id: 'categories/titty-fucking' },\n  { text: 'èƒ¸ä¸Šå°„ç²¾', id: 'categories/cum-on-tits' },\n  { text: 'æ¥å»', id: 'categories/kissing' },\n  { text: 'ä¼ æ•™å£«', id: 'categories/missionary' },\n  { text: 'å‰ƒæ¯›', id: 'categories/shaving' },\n  { text: 'å‰æˆ', id: 'categories/foreplay' },\n  { text: 'å‰ªåˆ€ä½', id: 'categories/scissoring' },\n  { text: 'åŒé‡æ’å…¥', id: 'categories/double-penetration' },\n  { text: 'åå‘ç¾¤äº¤', id: 'categories/reverse-gangbang' },\n  { text: 'å£äº¤', id: 'categories/blowjob' },\n  { text: 'å£å†…å°„ç²¾', id: 'categories/cum-in-mouth' },\n  { text: 'åå…¥å¼', id: 'categories/doggy-style' },\n  { text: 'åç²¾', id: 'categories/cum-swallowing' },\n  { text: 'å‘»åŸ', id: 'categories/moaning' },\n  { text: 'å¥³æ€§æ‰‹æ·«', id: 'categories/female-masturbation' },\n  { text: 'ä½©æˆ´', id: 'categories/pegging' },\n  { text: 'å¥³ä¸Šä½', id: 'categories/cowgirl' },\n  { text: 'å°„ç²¾é•œå¤´', id: 'categories/cumshot' },\n  { text: 'å£å¯¹è‚›', id: 'categories/ass-to-mouth' },\n  { text: 'å¿«ä¹ç»“å±€', id: 'categories/happy-ending' },\n  { text: 'æ‰‹äº¤', id: 'categories/handjob' },\n  { text: 'æŒ‡äº¤', id: 'categories/fingering' },\n  { text: 'æŒ‰æ‘©', id: 'categories/massage' },\n  { text: 'æ‘©æ“¦', id: 'categories/humping' },\n  { text: 'æ—¶é—´åœæ­¢', id: 'categories/time-stop' },\n  { text: 'èˆ”è‚›', id: 'categories/rimjob' },\n  { text: 'æ·±å–‰', id: 'categories/deep-throat' },\n  { text: 'æ¸¸æˆ', id: 'categories/game' },\n  { text: 'å–·å°„', id: 'categories/squirting' },\n  { text: 'æŠ–è‡€', id: 'categories/twerking' },\n  { text: 'ç²—æš´æ€§çˆ±', id: 'categories/rough-sex' },\n  { text: 'è„¸éƒ¨æ“', id: 'categories/face-fuck' },\n  { text: 'ç²—æš´è‚›äº¤', id: 'categories/rough-anal' },\n  { text: 'äº’æ¢ç²¾æ¶²', id: 'categories/cumswap' },\n  { text: 'å¹çˆ†', id: 'categories/blowbang' },\n  { text: 'æµ´ç¼¸å°„ç²¾', id: 'categories/bukkake' },\n  { text: 'è‚›äº¤', id: 'categories/anal' },\n  { text: 'è‚›äº¤æ‰‹æ·«', id: 'categories/anal-masturbation' },\n  { text: 'æ‰©å¼ ', id: 'categories/gaping' },\n  { text: 'èˆ”å±çœ¼', id: 'categories/ass-licking' },\n  { text: 'å£äº¤çˆ±æŠš', id: 'categories/cunnilingus' },\n  { text: 'åƒé˜´', id: 'categories/eating-pussy' },\n  { text: 'è¶³äº¤', id: 'categories/footjob' },\n  { text: 'è„šä¸Šå°„ç²¾', id: 'categories/cum-on-feet' },\n  { text: 'é‡å£', id: 'categories/hardcore' },\n  { text: 'æ®‹æš´æ€§çˆ±', id: 'categories/brutal-sex' },\n  { text: 'å¹²æ‘©', id: 'categories/dry-humping' },\n  { text: 'é¢éƒ¨å°„ç²¾', id:'categories/facial' },\n  { text: 'éª‘ä¹˜', id: 'categories/riding' },\n  { text: 'åè„¸', id: 'categories/facesitting' },\n  { text: 'é«˜æ½®', id: 'categories/orgasm' },\n  { text: 'è¾¹ç¼˜', id: 'categories/edging' },\n  { text: 'äººå½¢å®¶å…·', id: 'categories/human-furniture' },\n  { text: 'èº«ä½“å½©ç»˜', id: 'categories/body-paint' },\n  { text: 'äººç°ç¼¸', id: 'categories/human-ashtray' },\n  { text: 'å‰åˆ—è…ºæŒ‰æ‘©', id: 'categories/prostate-massage' },\n  { text: 'æ‰¶å¥¹', id: 'categories/futanari' },\n  { text: 'åå£æ°´', id: 'categories/spitting' },\n  { text: 'CEI', id: 'categories/cei' },\n  { text: 'æ³Œä¹³', id: 'categories/lactating' },\n  { text: 'ç»‘ç¼š', id: 'categories/hogtied' },\n  { text: 'å›°å¢ƒæŸç¼š', id: 'categories/predicament-bondage' },\n  { text: 'Gokkun', id: 'categories/gokkun' },\n  { text: 'å¥³ç‹', id: 'categories/femdom' },\n  { text: 'å¥³åŒæ€§ç»Ÿæ²»', id: 'categories/lezdom' },\n  { text: 'å¦‡ç§‘æ‹ç‰©', id: 'categories/gyno-fetish' },\n  { text: 'å¨˜åŒ–', id: 'categories/sissy' }\n];",
                "home": "const cate = env.get('category')  'categories/jav';\nconst page = Number(env.get('page')  1);\nconst base = 'https://zh.xhamster.com';\nconst headers = {\n 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)',\n 'Referer': base,\n 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n 'Accept-Language': 'zh-CN,zh;q=0.9',\n 'Connection': 'keep-alive'\n};\n\nfunction toAbs(h){ if(!h) return ''; h = String(h).split('#')[0]; if(/^https?:\\/\\//i.test(h)) return h; if(h.startsWith('/')) return base + h; return base + '/' + h.replace(/^\\/+/, ''); }\n\nfunction buildCategoryUrl(cat, p){ if(!cat) return ${base}/?page=${p}; if(/^https?:\\/\\//i.test(cat)){ if(p > 1) return cat.includes('?') ? ${cat}&page=${p} : ${cat}${cat.endsWith('/') ? '' : '/'}?page=${p}; return cat; } const clean = cat.replace(/^\\/+|\\/+$/g, ''); if(p <= 1) return ${base}/${clean}; return ${base}/${clean}/${p}; }\n\nfunction parseList(html){ const $ = kitty.load(html); const items = []; const seen = new Set(); $('.thumb-list__item').each((i, el) => { const $el = $(el); const vid = ($el.attr('data-video-id')  '').trim(); const link = $el.find('a[data-role=\"thumb-link\"]').attr('href')  $el.find('a').attr('href')  ''; const pageUrl = link ? (link.startsWith('http') ? link : toAbs(link)) : ''; if(!pageUrl  seen.has(pageUrl)) return; seen.add(pageUrl); const title = ($el.find('.video-thumb-info__name').text()  $el.find('a[data-role=\"thumb-link\"]').attr('aria-label')  '').trim(); if(!title) return; const img = $el.find('img[data-role=\"thumb-preview-img\"]'); const cover = img.attr('src')  img.attr('data-src')  ''; const duration = ($el.find('[data-role=\"video-duration\"]').text()  $el.find('.thumb-image-container__duration').text()  '').trim(); const uploader = ($el.find('.video-uploader__name').text()  '').trim(); const views = ($el.find('.video-thumb-views').text()  '').trim(); const desc = [uploader, views].filter(Boolean).join(' | '); const playlist = [{ title: 'æ’­æ”¾å…¥å£', videos: [{ text: 'ğŸ˜é«˜æ¸…', id: pageUrl }] }]; items.push({ id:vid  pageUrl, title, cover: cover ? (cover.startsWith('http') ? cover : toAbs(cover)) : '', remark: duration, desc, playlist }); }); return items; }\n\nif(cate==='4k'){ const respBanner = await req(`${base}/4k/newest`, { headers }); const htmlBanner = typeof respBanner==='string'?respBanner:(respBanner&&respBanner.content?respBanner.content:''); const bannerList = parseList(htmlBanner).slice(0,6); const moduleCats = [ { title:'Blowjob', url:`${base}/categories/blowjob` }, { title:'18-Year-Old', url:`${base}/categories/18-year-old` }, { title:'Softcore', url:`${base}/categories/softcore` } ]; const modules=[]; for(const cat of moduleCats){ const r=await req(cat.url,{headers}); const h=typeof r==='string'?r:(r&&r.content?r.content:''); const list=parseList(h).slice(0,4); modules.push({ type:'list', title:cat.title, videos:list }); } return { type:'complex', data:[{ type:'banner', videos:bannerList }, ...modules] }; }\n\nconst url = buildCategoryUrl(cate, page);\nconst resp = await req(url, { headers });\nconst html = typeof resp==='string'?resp:(resp&&resp.content?resp.content:'');\nreturn parseList(html);",
                "search": "const keyword = env.get('keyword')  '';\nconst page = Number(env.get('page')  1);\nconst base = 'https://zh.xhamster.com';\nconst headers = {\n  'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)',\n  'Referer': base,\n  'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n  'Accept-Language': 'zh-CN,zh;q=0.9',\n  'Connection': 'keep-alive'\n};\n\nfunction toAbs(h){ if(!h) return ''; h = String(h).split('#')[0]; if(/^https?:\\/\\//i.test(h)) return h; if(h.startsWith('/')) return base + h; return base + '/' + h.replace(/^\\/+/, ''); }\n\nfunction buildSearchUrl(k, p){\n  if(!k) return `${base}/search`;\n  const enc = encodeURIComponent(k);\n  // æ”¯æŒ /search/å…³é”®è¯ å’Œ /search/å…³é”®è¯?page=N\n  if(p <= 1) return `${base}/search/${enc}`;\n  return `${base}/search/${enc}?page=${p}`;\n}\n\nconst url = buildSearchUrl(keyword, page);\nconst resp = await req(url, { headers });\nconst html = (typeof resp === 'string') ? resp : (resp && resp.content ? resp.content : '');\n\nfunction parseList(html){\n  const $ = kitty.load(html);\n  const items = [];\n  const seen = new Set();\n  $('.thumb-list__item').each((i, el) => {\n    const $el = $(el);\n    const vid = ($el.attr('data-video-id')  '').trim();\n    const link = $el.find('a[data-role=\"thumb-link\"]').attr('href')  $el.find('a').attr('href')  '';\n    const pageUrl = link ? (link.startsWith('http') ? link : toAbs(link)) : '';\n    if(!pageUrl  seen.has(pageUrl)) return; seen.add(pageUrl);\n    const title = ($el.find('.video-thumb-info__name').text()  '').trim();\n    if(!title) return;\n    const img = $el.find('img[data-role=\"thumb-preview-img\"]');\n    const cover = img.attr('src')  img.attr('data-src')  '';\n    const duration = ($el.find('[data-role=\"video-duration\"]').text()  $el.find('.thumb-image-container__duration').text()  '').trim();\n    const uploader = ($el.find('.video-uploader__name').text()  '').trim();\n    const views = ($el.find('.video-thumb-views').text()  '').trim();\n    const desc = [uploader, views].filter(Boolean).join(' | ');\n    const playlist = [{ title: 'æ’­æ”¾å…¥å£', videos: [{ text: 'å—…æ¢æ’­æ”¾', id: pageUrl }] }];\n    items.push({ id: vid  pageUrl, title, cover: cover ? (cover.startsWith('http') ? cover : toAbs(cover)) : '', remark: duration, desc, playlist });\n  });\n  return items;\n}\n\nreturn parseList(html);",
                "detail": "const movieId = env.get('movieId')  env.get('id') || '';\nif(!movieId) return { id: '', title: '', cover: '', desc: '', playlist: [] };\nconst base = 'https://zh.xhamster.com';\nlet playUrl = '';\nif(String(movieId).startsWith('http')) playUrl = String(movieId);\nelse playUrl = `https://zh.xhamster.com/view_video.php?viewkey=${encodeURIComponent(String(movieId))}`;\n// ç›´æ¥è¿”å›æ’­æ”¾é¡µ URLï¼ˆä¸å¸¦ $web_ å‰ç¼€ï¼‰ï¼Œå—…æ¢å™¨ä¼šå¤„ç†è¯¥é¡µé¢å¹¶æå–æµ\nreturn { id: String(movieId), title: 'æ’­æ”¾é¡µ', cover: '', desc: playUrl, playlist: [ { title: 'æ’­æ”¾å…¥å£', videos: [ { text: 'å—…æ¢', id: playUrl } ] } ] };"}
        }
}
